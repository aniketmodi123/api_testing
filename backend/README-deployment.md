# API Testing Backend - Render Deployment

## Quick Deploy to Render

This FastAPI application is configured for easy deployment to Render.com.

### Method 1: One-Click Deploy (Recommended)

1. Fork or upload this repository to GitHub
2. Connect your GitHub account to Render
3. Create a new Web Service and select this repository
4. Render will automatically detect the `render.yaml` file and configure everything

### Method 2: Manual Deployment

1. **Create PostgreSQL Database:**

   - Go to Render Dashboard
   - Click "New +" → "PostgreSQL"
   - Name: `api-testing-postgres`
   - Plan: Free
   - Note down the connection details

2. **Create Web Service:**

   - Click "New +" → "Web Service"
   - Connect your GitHub repository
   - Configure:
     - Name: `api-testing-backend`
     - Environment: `Python 3`
     - Build Command: `./build.sh`
     - Start Command: `python start.py`

3. **Set Environment Variables:**
   ```
   PRODUCTION_POSTGRES_HOST=<your-postgres-host>
   PRODUCTION_POSTGRES_USER=<your-postgres-user>
   PRODUCTION_POSTGRES_PASSWORD=<your-postgres-password>
   PRODUCTION_POSTGRES_DB=<your-postgres-db>
   PRODUCTION_POSTGRES_PORT=5432
   JWT_SECRET_KEY=<auto-generated-or-custom>
   JWT_ALGORITHM=HS256
   ```

### Features Included

- ✅ Production-ready FastAPI configuration
- ✅ PostgreSQL database integration
- ✅ SSL/TLS support
- ✅ CORS middleware
- ✅ Authentication middleware
- ✅ Automatic database connection management
- ✅ Environment-based configuration
- ✅ Health check endpoints

### API Documentation

Once deployed, your API documentation will be available at:

- Swagger UI: `https://your-app-name.onrender.com/swagger`
- OpenAPI JSON: `https://your-app-name.onrender.com/openapi.json`

### Environment Variables

| Variable                       | Description                     | Required |
| ------------------------------ | ------------------------------- | -------- |
| `PRODUCTION_POSTGRES_HOST`     | PostgreSQL hostname             | Yes      |
| `PRODUCTION_POSTGRES_USER`     | PostgreSQL username             | Yes      |
| `PRODUCTION_POSTGRES_PASSWORD` | PostgreSQL password             | Yes      |
| `PRODUCTION_POSTGRES_DB`       | PostgreSQL database name        | Yes      |
| `PRODUCTION_POSTGRES_PORT`     | PostgreSQL port (default: 5432) | No       |
| `JWT_SECRET_KEY`               | Secret key for JWT tokens       | Yes      |
| `JWT_ALGORITHM`                | JWT algorithm (default: HS256)  | No       |

### Troubleshooting

1. **Build fails:** Check that all dependencies in `requirements.txt` are valid
2. **Database connection fails:** Verify all PostgreSQL environment variables are correct
3. **SSL issues:** The app includes relaxed SSL settings for development - this is normal
4. **Import errors:** Ensure all Python modules are properly structured

### Local Development

To run locally:

```bash
# Install dependencies
pip install -r src/requirements.txt

# Set environment variables
export PRODUCTION_POSTGRES_HOST=localhost
export PRODUCTION_POSTGRES_USER=your_user
# ... other variables

# Run the application
python start.py
```

### Support

For deployment issues, check:

1. Render build logs
2. Application logs
3. Database connection status
4. Environment variable configuration
